cmake_minimum_required(VERSION 3.16.3)
project(HOG)
set(CMAKE_CXX_STANDARD 20)
if(DATASET_MEMORY)
    message("Calculating Memory dataset")
    set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DDATASET_MEMORY")
elseif(AHO_CORASICK_MEMORY)
    message("Calculating Memory aho-corasick")
    set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DAHO_CORASICK_MEMORY")
else()
    message("Calculating Memory total")
endif()

if(ALGO EQUAL 1)
    message("compiling ssp")
elseif(ALGO EQUAL 2)
    message("compiling sk")
elseif(ALGO EQUAL 3)
    message("compiling bcer")
else()
    message("compiling ec")
endif()

set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -O3 -DDEBUG")
if(ALGO EQUAL 1)
    set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DSSP")
elseif(ALGO EQUAL 2)
    set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DSK")
elseif(ALGO EQUAL 3)
    set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DBCER")
else()
    set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DEC")
endif()
set(EXECUTABLE_OUTPUT_PATH ${CMAKE_BINARY_DIR}/bin)

include_directories(./include)
# add_subdirectory(apsphog)

if(ALGO EQUAL 1)
    add_executable(HOG ./src/HOG-SSP.cpp ./src/Aho-Cora.cpp ./tests/testHOG.cpp ./src/timer.cpp)
elseif(ALGO EQUAL 2)
    add_executable(HOG ./src/HOG-SK.cpp ./src/Aho-Cora.cpp ./tests/testHOG.cpp ./src/timer.cpp)
elseif(ALGO EQUAL 3)
    add_executable(HOG ./src/HOG-BCER.cpp ./src/Aho-Corax.cpp ./src/EHOGx.cpp ./tests/testHOG.cpp ./src/timer.cpp)
else()
    add_executable(HOG ./src/HOG-EC.cpp ./src/Aho-Corax.cpp ./src/EHOGx.cpp ./tests/testHOG.cpp ./src/timer.cpp)
endif()

# target_link_libraries(HOG apsphog)